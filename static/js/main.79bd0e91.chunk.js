(this["webpackJsonpblog-react-aplictation"]=this["webpackJsonpblog-react-aplictation"]||[]).push([[0],{119:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(11),c=n.n(a),o=n(28),i=n(18),s=n(29),u=n(77),l=n(19),d="posts/GET",p="posts/GET_COMMENTS",b="comment/GET_POST_COMMENTS",f="post/GET_POST",j="modal/SHOW_MODAL",m="modal/HIDE_MODAL",h={fetchedPosts:[]},O={hidden:!1},x={fetchedComments:[]},v=Object(s.combineReducers)({postsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(l.a)(Object(l.a)({},t),{},{fetchedPosts:e.payload});case f:return Object(l.a)(Object(l.a)({},t),{},{fetchedPosts:t.fetchedPosts.filter((function(t){return t.id===e.payload}))});default:return t}},modalReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return{hidden:!0};case m:return{hidden:!1};default:return t}},commentsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return Object(l.a)(Object(l.a)({},t),{},{fetchedComments:e.payload});case b:return console.log(t),Object(l.a)(Object(l.a)({},t),{},{fetchedComments:t.fetchedComments.filter((function(t){return t.postId===e.payload}))});default:return t}}}),y=n(78),g=Object(s.createStore)(v,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(y.a))),w=(n(96),n(13)),k=n(8),S=n.n(k),C=n(14),N=n(22),I=n.n(N),T="https://bloggy-api.herokuapp.com/posts",R=function(){var t=Object(C.a)(S.a.mark((function t(){var e,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get(T);case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){return R()},P=function(){var t=Object(C.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I.a.delete("".concat(T,"/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(t){return P(t)},z=function(){var t=Object(C.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I.a.delete("".concat("https://bloggy-api.herokuapp.com/comments","/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){return z(t)},D=function(){var t=Object(C.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I.a.post(T,Object(l.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(t){return D(t)},L=function(){var t=Object(C.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I.a.post("https://bloggy-api.herokuapp.com/comments",Object(l.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(t){return L(t)},B=function(){var t=Object(C.a)(S.a.mark((function t(){var e,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get("https://bloggy-api.herokuapp.com/comments");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){return B()};function W(){return function(){var t=Object(C.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:n=t.sent,e({type:d,payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function U(t){return function(){var e=Object(C.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:r=e.sent,n({type:p,payload:r}),n({type:b,payload:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function H(){return{type:j}}var J=n(163),V=n(60),q=n(154),K=Object(q.a)((function(t){return{root:{background:"white",padding:50,borderRadius:15,"& .MuiTextField-root":{margin:t.spacing(1),width:500}},button:{display:"flex",margin:"0 auto"}}})),Q=n(162),X=n(79),Y=n.n(X),Z=n(123),$=n(3);function tt(){var t=Object(w.g)(),e=new URLSearchParams(t.search).get("_embed"),n=(+Object(w.h)().match).postId,a=Object(i.b)(),c=Object(r.useState)(""),o=Object(V.a)(c,2),s=o[0],u=o[1],l=Object(r.useState)(""),b=Object(V.a)(l,2),f=b[0],j=b[1],h=K(),O=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"title":u(r);break;case"body":j(r);break;default:return}};return Object($.jsxs)("form",{className:h.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){var r,c;(t.preventDefault(),a({type:m}),j(""),e)?a((r={postId:n,body:f},function(){var t=Object(C.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(r);case 2:return t.next=4,G();case 4:n=t.sent,e({type:p,payload:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):(a((c={title:s,body:f},function(){var t=Object(C.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(c);case 2:return t.next=4,E();case 4:n=t.sent,e({type:d,payload:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),u(""))},children:[!e&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{children:Object($.jsx)(Q.a,{label:"Type your title",id:"filled-size-normal",value:s,name:"title",variant:"filled",onChange:O})}),Object($.jsx)("div",{children:Object($.jsx)(Q.a,{label:"Type here",id:"filled-size-normal",value:f,name:"body",variant:"filled",onChange:O})})]}),e&&Object($.jsx)("div",{children:Object($.jsx)(Q.a,{label:"Type comment",id:"filled-size-normal",value:f,name:"body",variant:"filled",onChange:O})}),Object($.jsx)("div",{children:Object($.jsx)(Z.a,{className:h.button,variant:"contained",color:"primary",size:"large",type:"submit",startIcon:Object($.jsx)(Y.a,{}),children:"Save"})})]})}var et=Object(q.a)((function(t){return{backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}}));function nt(){var t=et(),e=Object(i.c)((function(t){return t.modalReducer.hidden}));return Object($.jsx)(J.a,{className:t.backdrop,open:e,children:Object($.jsx)(tt,{})})}var rt=Object(q.a)({button:{margin:"20px auto 0",display:"block"},list:{margin:0}}),at=Object(q.a)((function(t){return{root:{minWidth:275},wrapper:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:t.spacing(1)}},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}})),ct=n(161),ot=n(158),it=n(55),st=n.n(it),ut=n(159),lt=n(160);function dt(){var t=at(),e=Object(w.f)(),n=Object(i.b)(),a=(+Object(w.h)().match).postId;Object(r.useEffect)((function(){return n(U(a))}),[]);var c=Object(i.c)((function(t){return t.commentsReducer.fetchedComments}));return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("ul",{children:c.map((function(e){return Object($.jsx)("li",{className:t.item,children:Object($.jsx)(ot.a,{className:t.root,variant:"outlined",children:Object($.jsxs)(ut.a,{children:[Object($.jsx)(lt.a,{className:t.pos,color:"textSecondary",children:e.body}),Object($.jsx)(Z.a,{variant:"contained",color:"secondary",className:t.button,startIcon:Object($.jsx)(st.a,{}),onClick:function(){return n(function(t){var e=t.id,n=t.postId;return function(){var t=Object(C.a)(S.a.mark((function t(r){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return t.next=4,G();case 4:a=t.sent,r({type:p,payload:a}),r({type:b,payload:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({id:e.id,postId:a}))},children:"Delete"})]})})},e.id)}))}),Object($.jsx)("div",{className:t.wrapper,children:Object($.jsxs)(ct.a,{size:"large",color:"primary","aria-label":"large outlined primary button group",children:[Object($.jsx)(Z.a,{onClick:function(){return n(H())},children:"Add new comment"}),Object($.jsx)(Z.a,{onClick:function(){e.push("/"),n(W())},children:"Main page"})]})}),Object($.jsx)(nt,{})]})}var pt=Object(q.a)((function(t){return{root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}}));function bt(t){var e=t.title,n=t.body,r=t.id,a=Object(w.g)(),c=new URLSearchParams(a.search).get("_embed"),s=Object(i.b)(),u=pt(),l=Object(w.f)(),p=function(t){s(U(t)),s(function(t){return{type:f,payload:t}}(t))},b=function(t){s(function(t){return function(){var e=Object(C.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:return e.next=4,E();case 4:r=e.sent,n({type:d,payload:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)),l.push("/")};return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("li",{className:u.item,children:Object($.jsx)(ot.a,{className:u.root,variant:"outlined",children:Object($.jsxs)(ut.a,{children:[Object($.jsx)(lt.a,{className:u.title,color:"textSecondary",gutterBottom:!0,children:e}),Object($.jsx)(lt.a,{className:u.pos,color:"textSecondary",children:n}),Object($.jsx)(Z.a,{variant:"contained",color:"secondary",className:u.button,startIcon:Object($.jsx)(st.a,{}),onClick:function(){return b(r)},children:"Delete"}),Object($.jsx)(o.b,{to:"/".concat(r,"?_embed=comments"),onClick:function(){return p(r)},children:"Comments"})]})})}),c&&Object($.jsx)(dt,{})]})}var ft=function(){var t=rt(),e=Object(i.b)(),n=Object(i.c)((function(t){return t.postsReducer.fetchedPosts})),a=Object(w.g)(),c=new URLSearchParams(a.search).get("_embed");return Object(r.useEffect)((function(){e(W())}),[]),Object($.jsxs)($.Fragment,{children:[Object($.jsx)("ul",{className:t.list,children:n.map((function(t){return Object($.jsx)(bt,{title:t.title,body:t.body,id:t.id},t.id)}))}),!c&&Object($.jsx)(Z.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){return e(H())},children:"Add new post"}),Object($.jsx)(nt,{})]})};var jt=function(){return Object($.jsxs)($.Fragment,{children:[Object($.jsx)(w.b,{exact:!0,path:"/:postId?",component:ft}),Object($.jsx)(w.a,{exact:!0,to:"/"})]})};c.a.render(Object($.jsx)(i.a,{store:g,children:Object($.jsx)(o.a,{children:Object($.jsx)(jt,{})})}),document.getElementById("root"))},96:function(t,e,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.79bd0e91.chunk.js.map