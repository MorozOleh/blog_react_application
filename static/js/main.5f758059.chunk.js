(this["webpackJsonpblog-react-aplictation"]=this["webpackJsonpblog-react-aplictation"]||[]).push([[0],{100:function(t,e,n){},124:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(10),c=n.n(a),o=n(28),s=n(18),i=n(29),u=n(80),l=n(19),d="posts/GET",p="posts/GET_COMMENTS",b="comment/GET_POST_COMMENTS",f="post/GET_POST",j="modal/SHOW_MODAL",m="modal/HIDE_MODAL",h={fetchedPosts:[]},O={hidden:!1},y=n(83),x={fetchedComments:[]},v=Object(i.combineReducers)({postsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:return Object(l.a)(Object(l.a)({},t),{},{fetchedPosts:e.payload});case f:return Object(l.a)(Object(l.a)({},t),{},{fetchedPosts:t.fetchedPosts.filter((function(t){return t.id===e.payload}))});default:return t}},modalReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return{hidden:!0};case m:return{hidden:!1};default:return t}},commentsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return console.log(e.payload),Object(l.a)(Object(l.a)({},t),{},{fetchedComments:Object(y.a)(e.payload)});case b:return console.log(e.payload),console.log(t),Object(l.a)(Object(l.a)({},t),{},{fetchedComments:t.fetchedComments.filter((function(t){return t.postId===+e.payload}))});default:return t}}}),g=n(81),w=Object(i.createStore)(v,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(g.a))),k=(n(100),n(13)),S=n(8),C=n.n(S),N=n(15),I=n(22),T=n.n(I),R="https://bloggy-api.herokuapp.com/posts",P=function(){var t=Object(N.a)(C.a.mark((function t(){var e,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get(R);case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){return P()},E=function(){var t=Object(N.a)(C.a.mark((function t(){var e,n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("https://bloggy-api.herokuapp.com/comments");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){return E()},z=function(){var t=Object(N.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.delete("".concat(R,"/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t){return z(t)},F=function(){var t=Object(N.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.delete("".concat("https://bloggy-api.herokuapp.com/comments","/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(t){return F(t)},A=function(){var t=Object(N.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.post(R,Object(l.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(t){return A(t)},G=function(){var t=Object(N.a)(C.a.mark((function t(e){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.post("https://bloggy-api.herokuapp.com/comments",Object(l.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(t){return G(t)};function W(){return function(){var t=Object(N.a)(C.a.mark((function t(e){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:n=t.sent,e({type:d,payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function H(){return{type:j}}function J(){return{type:m}}var Y=n(168),V=n(63),q=n(159),K=Object(q.a)((function(t){return{root:{background:"white",padding:50,borderRadius:15,"& .MuiTextField-root":{margin:t.spacing(1),width:500}},button:{display:"flex",margin:"0 auto"}}})),Q=n(43),X=(n(120),n(167)),Z=n(82),$=n.n(Z),tt=n(128),et=n(4);function nt(){var t=Object(r.useState)(""),e=Object(V.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(""),o=Object(V.a)(c,2),i=o[0],u=o[1],l=Object(k.g)(),f=new URLSearchParams(l.search).get("_embed"),j=Object(k.h)(),m=Object(s.b)(),h=K(),O=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"title":a(r);break;case"body":u(r);break;default:return}};return Object(et.jsxs)("form",{className:h.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){return t.preventDefault(),u(""),f&&i?(Q.b.success("You have successfully added your comment"),m((e={postId:+j.postId,body:i},function(){var t=Object(N.a)(C.a.mark((function t(n){var r,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.postId,t.next=3,U(e);case 3:return t.next=5,M();case 5:a=t.sent,n({type:p,payload:a}),n({type:b,payload:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),void m(J())):n&&i?(Q.b.success("You have successfully added your post"),m((r={title:n,body:i},function(){var t=Object(N.a)(C.a.mark((function t(e){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(r);case 2:return t.next=4,_();case 4:n=t.sent,e({type:d,payload:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),m(J()),void a("")):void Q.b.warn("Upps you have forgotten to fill all fields");var e,r},children:[!f&&Object(et.jsx)("div",{children:Object(et.jsx)(X.a,{label:"Type your title",id:"filled-size-normal",value:n,name:"title",variant:"filled",onChange:O})}),Object(et.jsx)("div",{children:Object(et.jsx)(X.a,{label:f?"Type your comment":"Type your description",id:"filled-size-normal",value:i,name:"body",variant:"filled",onChange:O})}),Object(et.jsx)("div",{children:Object(et.jsx)(tt.a,{className:h.button,variant:"contained",color:"primary",size:"large",type:"submit",startIcon:Object(et.jsx)($.a,{}),children:"Save"})})]})}var rt=Object(q.a)((function(t){return{backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}}));function at(){var t=rt(),e=Object(s.c)((function(t){return t.modalReducer.hidden}));return Object(et.jsx)(Y.a,{className:t.backdrop,open:e,children:Object(et.jsx)(nt,{})})}var ct=Object(q.a)({button:{margin:"20px auto 0",display:"block"},list:{margin:0}}),ot=Object(q.a)((function(t){return{root:{minWidth:275},wrapper:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:t.spacing(1)}},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}})),st=n(166),it=n(163),ut=n(58),lt=n.n(ut),dt=n(164),pt=n(165);function bt(){var t=ot(),e=Object(k.f)(),n=Object(s.b)(),r=Object(k.h)(),a=Object(s.c)((function(t){return t.commentsReducer.fetchedComments}));return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("ul",{children:a.map((function(e){return Object(et.jsx)("li",{className:t.item,children:Object(et.jsx)(it.a,{className:t.root,variant:"outlined",children:Object(et.jsxs)(dt.a,{children:[Object(et.jsx)(pt.a,{className:t.pos,color:"textSecondary",children:e.body}),Object(et.jsx)(tt.a,{variant:"contained",color:"secondary",className:t.button,startIcon:Object(et.jsx)(lt.a,{}),onClick:function(){return n(function(t){var e=t.id,n=t.postId;return function(){var t=Object(N.a)(C.a.mark((function t(r){var a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:return t.next=4,M();case 4:a=t.sent,r({type:p,payload:a}),r({type:b,payload:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({id:e.id,postId:+r.postId}))},children:"Delete"})]})})},e.id)}))}),Object(et.jsx)("div",{className:t.wrapper,children:Object(et.jsxs)(st.a,{size:"large",color:"primary","aria-label":"large outlined primary button group",children:[Object(et.jsx)(tt.a,{onClick:function(){return n(H())},children:"Add new comment"}),Object(et.jsx)(tt.a,{onClick:function(){e.push("/"),n(W())},children:"Main page"})]})}),Object(et.jsx)(at,{})]})}var ft=Object(q.a)((function(t){return{root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}}));function jt(t){var e=t.title,n=t.body,r=t.id,a=Object(k.g)(),c=new URLSearchParams(a.search).get("_embed"),i=Object(s.b)(),u=ft(),l=Object(k.f)(),j=function(t){i(function(t){return function(){var e=Object(N.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:f,payload:t}),e.next=3,M();case 3:r=e.sent,n({type:p,payload:r}),n({type:b,payload:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))},m=function(t){i(function(t){return function(){var e=Object(N.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return e.next=4,_();case 4:r=e.sent,n({type:d,payload:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)),l.push("/")};return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("li",{className:u.item,children:Object(et.jsx)(it.a,{className:u.root,variant:"outlined",children:Object(et.jsxs)(dt.a,{children:[Object(et.jsx)(pt.a,{className:u.title,color:"textSecondary",gutterBottom:!0,children:e}),Object(et.jsx)(pt.a,{className:u.pos,color:"textSecondary",children:n}),Object(et.jsx)(tt.a,{variant:"contained",color:"secondary",className:u.button,startIcon:Object(et.jsx)(lt.a,{}),onClick:function(){return m(r)},children:"Delete"}),Object(et.jsx)(o.b,{to:"/".concat(r,"?_embed=comments"),onClick:function(){return j(r)},children:"Comments"})]})})}),c&&Object(et.jsx)(bt,{})]})}var mt=function(){var t=ct(),e=Object(s.b)(),n=Object(s.c)((function(t){return t.postsReducer.fetchedPosts})),a=Object(k.g)(),c=new URLSearchParams(a.search).get("_embed");return Object(r.useEffect)((function(){e(W())}),[e]),Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("ul",{className:t.list,children:n.map((function(t){return Object(et.jsx)(jt,{title:t.title,body:t.body,id:t.id},t.id)}))}),!c&&Object(et.jsx)(tt.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){return e(H())},children:"Add new post"}),Object(et.jsx)(at,{})]})};var ht=function(){return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)(Q.a,{}),Object(et.jsx)(k.b,{exact:!0,path:"/:postId?",component:mt}),Object(et.jsx)(k.a,{exact:!0,to:"/"})]})};c.a.render(Object(et.jsx)(s.a,{store:w,children:Object(et.jsx)(o.a,{children:Object(et.jsx)(ht,{})})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.5f758059.chunk.js.map