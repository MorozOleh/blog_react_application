(this["webpackJsonpblog-react-aplictation"]=this["webpackJsonpblog-react-aplictation"]||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),o=n(28),s=n(18),i=n(29),u=n(77),l=n(19),d="posts/GET",p="posts/GET_COMMENTS",b="comment/GET_POST_COMMENTS",j="post/GET_POST",f="modal/SHOW_MODAL",m="modal/HIDE_MODAL",h={fetchedPosts:[]},O={hidden:!1},x={fetchedComments:[]},v=Object(i.combineReducers)({postsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)({},e),{},{fetchedPosts:t.payload});case j:return Object(l.a)(Object(l.a)({},e),{},{fetchedPosts:e.fetchedPosts.filter((function(e){return e.id===t.payload}))});default:return e}},modalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{hidden:!0};case m:return{hidden:!1};default:return e}},commentsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{fetchedComments:t.payload});case b:return console.log(e),Object(l.a)(Object(l.a)({},e),{},{fetchedComments:e.fetchedComments.filter((function(e){return e.postId===t.payload}))});default:return e}}}),y=n(78),g=Object(i.createStore)(v,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(y.a))),w=(n(96),n(13)),k=n(154),S=n(8),C=n.n(S),N=n(14),I=n(22),T=n.n(I),R="https://bloggy-api.herokuapp.com/posts",E=function(){var e=Object(N.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(R);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){return E()},_=function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.delete("".concat(R,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return _(e)},M=function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.delete("".concat("https://bloggy-api.herokuapp.com/comments","/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return M(e)},F=function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.post(R,Object(l.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return F(e)},A=function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.post("https://bloggy-api.herokuapp.com/comments",Object(l.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return A(e)},G=function(){var e=Object(N.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("https://bloggy-api.herokuapp.com/comments");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){return G()};function U(){return function(){var e=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:n=e.sent,t({type:d,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function H(e){return function(){var t=Object(N.a)(C.a.mark((function t(n){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:r=t.sent,n({type:p,payload:r}),n({type:b,payload:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function J(){return{type:f}}var V=n(163),q=n(60),K=n(162),Q=n(79),X=n.n(Q),Y=n(123),Z=n(3),$=Object(k.a)((function(e){return{root:{background:"white",padding:50,borderRadius:15,"& .MuiTextField-root":{margin:e.spacing(1),width:500}},button:{display:"flex",margin:"0 auto"}}}));function ee(){var e=Object(w.g)(),t=new URLSearchParams(e.search).get("_embed"),n=Object(w.h)(),a=Object(s.b)(),c=Object(r.useState)(""),o=Object(q.a)(c,2),i=o[0],u=o[1],l=Object(r.useState)(""),b=Object(q.a)(l,2),j=b[0],f=b[1],h=$(),O=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"title":u(r);break;case"body":f(r);break;default:return}};return Object(Z.jsxs)("form",{className:h.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){var r,c;(e.preventDefault(),a({type:m}),f(""),t)?a((r={postId:+n.postId,body:j},function(){var e=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(r);case 2:return e.next=4,W();case 4:n=e.sent,t({type:p,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):(a((c={title:i,body:j},function(){var e=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(c);case 2:return e.next=4,P();case 4:n=e.sent,t({type:d,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),u(""))},children:[!t&&Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("div",{children:Object(Z.jsx)(K.a,{label:"Type your title",id:"filled-size-normal",value:i,name:"title",variant:"filled",onChange:O})}),Object(Z.jsx)("div",{children:Object(Z.jsx)(K.a,{label:"Type here",id:"filled-size-normal",value:j,name:"body",variant:"filled",onChange:O})})]}),t&&Object(Z.jsx)("div",{children:Object(Z.jsx)(K.a,{label:"Type comment",id:"filled-size-normal",value:j,name:"body",variant:"filled",onChange:O})}),Object(Z.jsx)("div",{children:Object(Z.jsx)(Y.a,{className:h.button,variant:"contained",color:"primary",size:"large",type:"submit",startIcon:Object(Z.jsx)(X.a,{}),children:"Save"})})]})}var te=Object(k.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ne(){var e=te(),t=Object(s.c)((function(e){return e.modalReducer.hidden}));return Object(Z.jsx)("div",{children:Object(Z.jsx)(V.a,{className:e.backdrop,open:t,children:Object(Z.jsx)(ee,{})})})}var re=n(161),ae=n(158),ce=n(55),oe=n.n(ce),se=n(159),ie=n(160),ue=Object(k.a)((function(e){return{root:{minWidth:275},wrapper:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:e.spacing(1)}}}));function le(){var e=ue(),t=Object(w.f)(),n=Object(s.b)(),a=Object(w.h)();Object(r.useEffect)((function(){return n(H(+a.postId))}),[]);var c=Object(s.c)((function(e){return e.commentsReducer.fetchedComments}));return console.log(c),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("ul",{children:c.map((function(t){return Object(Z.jsx)("li",{className:e.item,children:Object(Z.jsx)(ae.a,{className:e.root,variant:"outlined",children:Object(Z.jsxs)(se.a,{children:[Object(Z.jsx)(ie.a,{className:e.pos,color:"textSecondary",children:t.body}),Object(Z.jsx)(Y.a,{variant:"contained",color:"secondary",className:e.button,startIcon:Object(Z.jsx)(oe.a,{}),onClick:function(){return n(function(e){var t=e.id,n=e.postId;return function(){var e=Object(N.a)(C.a.mark((function e(r){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return e.next=4,W();case 4:a=e.sent,r({type:p,payload:a}),r({type:b,payload:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({id:t.id,postId:+a.postId}))},children:"Delete"})]})})},t.id)}))}),Object(Z.jsx)("div",{className:e.wrapper,children:Object(Z.jsxs)(re.a,{size:"large",color:"primary","aria-label":"large outlined primary button group",children:[Object(Z.jsx)(Y.a,{onClick:function(){return n(J())},children:"Add new comment"}),Object(Z.jsx)(Y.a,{onClick:function(){t.push("/"),n(U())},children:"Main page"})]})}),Object(Z.jsx)(ne,{})]})}var de=Object(k.a)((function(e){return{root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:e.spacing(1)}}}));function pe(e){var t=e.title,n=e.body,r=e.id,a=Object(w.g)(),c=new URLSearchParams(a.search).get("_embed"),i=Object(s.b)(),u=de(),l=Object(w.f)(),p=function(e){i(H(e)),i(function(e){return{type:j,payload:e}}(e))},b=function(e){i(function(e){return function(){var t=Object(N.a)(C.a.mark((function t(n){var r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:return t.next=4,P();case 4:r=t.sent,n({type:d,payload:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),l.push("/")};return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("li",{className:u.item,children:Object(Z.jsx)(ae.a,{className:u.root,variant:"outlined",children:Object(Z.jsxs)(se.a,{children:[Object(Z.jsx)(ie.a,{className:u.title,color:"textSecondary",gutterBottom:!0,children:t}),Object(Z.jsx)(ie.a,{className:u.pos,color:"textSecondary",children:n}),Object(Z.jsx)(Y.a,{variant:"contained",color:"secondary",className:u.button,startIcon:Object(Z.jsx)(oe.a,{}),onClick:function(){return b(r)},children:"Delete"}),Object(Z.jsx)(o.b,{to:"/".concat(r,"?_embed=comments"),onClick:function(){return p(r)},children:"Comments"})]})})}),c&&Object(Z.jsx)(le,{})]})}var be=Object(k.a)({button:{margin:"20px auto 0",display:"block"},list:{margin:0}});var je=function(){var e=Object(s.b)(),t=be(),n=Object(s.c)((function(e){return e.postsReducer.fetchedPosts})),a=Object(w.g)(),c=new URLSearchParams(a.search).get("_embed");return Object(r.useEffect)((function(){e(U())}),[]),console.log(n),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("ul",{className:t.list,children:n.map((function(e){return Object(Z.jsx)(pe,{title:e.title,body:e.body,id:e.id},e.id)}))}),!c&&Object(Z.jsx)(Y.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){return e(J())},children:"Add new post"}),Object(Z.jsx)(ne,{})]})};var fe=function(){return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(w.b,{exact:!0,path:"/:postId?",component:je}),Object(Z.jsx)(w.a,{exact:!0,to:"/"})]})};c.a.render(Object(Z.jsx)(s.a,{store:g,children:Object(Z.jsx)(o.a,{children:Object(Z.jsx)(fe,{})})}),document.getElementById("root"))},96:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.2b9553cf.chunk.js.map