(this["webpackJsonpblog-react-aplictation"]=this["webpackJsonpblog-react-aplictation"]||[]).push([[0],{100:function(t,e,n){},124:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(10),c=n.n(a),o=n(27),s=n(20),u=n(29),i=n(80),d=n(17),p="posts/GET",l="posts/GET_COMMENTS",b="comment/GET_POST_COMMENTS",f="post/GET_POST",j="modal/SHOW_MODAL",m="modal/HIDE_MODAL",h={fetchedPosts:[]},O={hidden:!1},y=n(83),v={fetchedComments:[]},x=Object(u.combineReducers)({postsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return Object(d.a)(Object(d.a)({},t),{},{fetchedPosts:e.payload});case f:return Object(d.a)(Object(d.a)({},t),{},{fetchedPosts:t.fetchedPosts.filter((function(t){return t.id===e.payload}))});default:return t}},modalReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return{hidden:!0};case m:return{hidden:!1};default:return t}},commentsReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(d.a)(Object(d.a)({},t),{},{fetchedComments:Object(y.a)(e.payload)});case b:return Object(d.a)(Object(d.a)({},t),{},{fetchedComments:t.fetchedComments.filter((function(t){return t.postId===+e.payload}))});default:return t}}}),g=n(81),w=Object(u.createStore)(x,Object(i.composeWithDevTools)(Object(u.applyMiddleware)(g.a))),k=(n(100),n(14)),S=n(7),N=n.n(S),C=n(13),I=n(19),T=n.n(I),R="https://bloggy-api.herokuapp.com/posts/",E=function(){var t=Object(C.a)(N.a.mark((function t(){var e,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get(R);case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){return E()},_=function(){var t=Object(C.a)(N.a.mark((function t(){var e,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("https://bloggy-api.herokuapp.com/comments");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){return _()},z=function(){var t=Object(C.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.delete("".concat(R).concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t){return z(t)},F=function(){var t=Object(C.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.delete("".concat("https://bloggy-api.herokuapp.com/comments","/").concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(t){return F(t)},A=function(){var t=Object(C.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.post(R,Object(d.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(t){return A(t)},G=function(){var t=Object(C.a)(N.a.mark((function t(e){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.post("https://bloggy-api.herokuapp.com/comments",Object(d.a)({},e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(t){return G(t)},W=function(){var t=Object(C.a)(N.a.mark((function t(e,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",T.a.put("".concat(R).concat(e),Object(d.a)({},n)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Y=function(t,e){return W(t,e)};function H(){return function(){var t=Object(C.a)(N.a.mark((function t(e){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P();case 2:n=t.sent,e({type:p,payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function J(t){return function(){var e=Object(C.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:f,payload:t}),e.next=3,M();case 3:r=e.sent,n({type:l,payload:r}),n({type:b,payload:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function V(){return{type:j}}function q(){return{type:m}}var K=n(168),Q=n(63),X=n(159),Z=Object(X.a)((function(t){return{root:{background:"white",padding:50,borderRadius:15,"& .MuiTextField-root":{margin:t.spacing(1),width:500}},button:{display:"flex",margin:"0 auto"}}})),$=n(38),tt=(n(120),n(167)),et=n(82),nt=n.n(et),rt=n(128),at=n(4);function ct(){var t=Object(r.useState)(""),e=Object(Q.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(""),o=Object(Q.a)(c,2),u=o[0],i=o[1],d=Object(k.g)(),f=Object(k.f)(),j=new URLSearchParams(d.search),m=j.get("_embed"),h=j.get("post"),O=Object(k.h)(),y=Object(s.b)(),v=Z(),x=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"title":a(r);break;case"body":i(r);break;default:return}};return Object(at.jsxs)("form",{className:v.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){return t.preventDefault(),i(""),h?($.b.success("You have successfully updated your post"),y((e=+O.postId,r={title:n,body:u},function(){var t=Object(C.a)(N.a.mark((function t(n){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e,r);case 2:return t.next=4,P();case 4:a=t.sent,n({type:p,payload:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),y(q()),f.push("/"),void a("")):m&&u?($.b.success("You have successfully added your comment"),y((c={postId:+O.postId,body:u},function(){var t=Object(C.a)(N.a.mark((function t(e){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.postId,t.next=3,U(c);case 3:return t.next=5,M();case 5:r=t.sent,e({type:l,payload:r}),e({type:b,payload:n});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),void y(q())):n&&u?($.b.success("You have successfully added your post"),y(function(t){return function(){var e=Object(C.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:return e.next=4,P();case 4:r=e.sent,n({type:p,payload:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({title:n,body:u})),y(q()),void a("")):void $.b.warn("Upps you have forgotten to fill all fields");var e,r,c},children:[!m&&Object(at.jsx)("div",{children:Object(at.jsx)(tt.a,{label:"Type your title",id:"filled-size-normal",value:n,name:"title",variant:"filled",onChange:x})}),Object(at.jsx)("div",{children:Object(at.jsx)(tt.a,{label:m?"Type your comment":"Type your description",id:"filled-size-normal",value:u,name:"body",variant:"filled",onChange:x})}),Object(at.jsx)("div",{children:Object(at.jsx)(rt.a,{className:v.button,variant:"contained",color:"primary",size:"large",type:"submit",startIcon:Object(at.jsx)(nt.a,{}),children:"Save"})})]})}var ot=Object(X.a)((function(t){return{backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}}));function st(){var t=ot(),e=Object(s.c)((function(t){return t.modalReducer.hidden}));return Object(at.jsx)(K.a,{className:t.backdrop,open:e,children:Object(at.jsx)(ct,{})})}var ut=Object(X.a)({button:{margin:"20px auto 0",display:"block"},list:{margin:0}}),it=Object(X.a)((function(t){return{root:{minWidth:275},wrapper:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:t.spacing(1)}},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}})),dt=n(166),pt=n(163),lt=n(58),bt=n.n(lt),ft=n(164),jt=n(165);function mt(){var t=it(),e=Object(k.f)(),n=Object(s.b)(),r=Object(k.h)(),a=Object(s.c)((function(t){return t.commentsReducer.fetchedComments}));return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)("ul",{children:a.map((function(e){return Object(at.jsx)("li",{className:t.item,children:Object(at.jsx)(pt.a,{className:t.root,variant:"outlined",children:Object(at.jsxs)(ft.a,{children:[Object(at.jsx)(jt.a,{className:t.pos,color:"textSecondary",children:e.body}),Object(at.jsx)(rt.a,{variant:"contained",color:"secondary",className:t.button,startIcon:Object(at.jsx)(bt.a,{}),onClick:function(){return n(function(t){var e=t.id,n=t.postId;return function(){var t=Object(C.a)(N.a.mark((function t(r){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:return t.next=4,M();case 4:a=t.sent,r({type:l,payload:a}),r({type:b,payload:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({id:e.id,postId:+r.postId}))},children:"Delete"})]})})},e.id)}))}),Object(at.jsx)("div",{className:t.wrapper,children:Object(at.jsxs)(dt.a,{size:"large",color:"primary","aria-label":"large outlined primary button group",children:[Object(at.jsx)(rt.a,{onClick:function(){return n(V())},children:"Add new comment"}),Object(at.jsx)(rt.a,{onClick:function(){e.push("/"),n(H())},children:"Main page"})]})}),Object(at.jsx)(st,{})]})}var ht=Object(X.a)((function(t){return{root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12},item:{listStyle:"none"},button:{margin:t.spacing(1)}}}));function Ot(t){var e=t.title,n=t.body,r=t.id,a=Object(k.g)(),c=new URLSearchParams(a.search).get("_embed"),u=Object(s.b)(),i=ht(),d=Object(k.f)(),l=function(t){u(function(t){return function(){var e=Object(C.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return e.next=4,P();case 4:r=e.sent,n({type:p,payload:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)),d.push("/")};return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)("li",{className:i.item,children:Object(at.jsx)(pt.a,{className:i.root,variant:"outlined",children:Object(at.jsxs)(ft.a,{children:[Object(at.jsx)(jt.a,{className:i.title,color:"textSecondary",gutterBottom:!0,children:e}),Object(at.jsx)(jt.a,{className:i.pos,color:"textSecondary",children:n}),Object(at.jsx)(rt.a,{variant:"contained",color:"secondary",className:i.button,startIcon:Object(at.jsx)(bt.a,{}),onClick:function(){return l(r)},children:"Delete"}),Object(at.jsx)(rt.a,{variant:"contained",color:"primary",className:i.button,component:o.b,to:"/".concat(r,"?_embed=comments"),onClick:function(){return function(t){u(J(t))}(r)},children:"Comments"}),!c&&Object(at.jsx)(rt.a,{variant:"contained",color:"primary",className:i.button,component:o.b,to:"/".concat(r,"?post=edit"),onClick:function(){return function(t){u(J(t)),u(V())}(r)},children:"Edit"})]})})}),c&&Object(at.jsx)(mt,{})]})}var yt=function(){var t=ut(),e=Object(s.b)(),n=Object(s.c)((function(t){return t.postsReducer.fetchedPosts})),a=Object(k.g)(),c=new URLSearchParams(a.search).get("_embed");return Object(r.useEffect)((function(){e(H())}),[e]),Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)("ul",{className:t.list,children:n.map((function(t){return Object(at.jsx)(Ot,{title:t.title,body:t.body,id:t.id},t.id)}))}),!c&&Object(at.jsx)(rt.a,{variant:"contained",className:t.button,color:"secondary",onClick:function(){return e(V())},children:"Add new post"}),Object(at.jsx)(st,{})]})};var vt=function(){return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)($.a,{}),Object(at.jsx)(k.b,{exact:!0,path:"/:postId?",component:yt}),Object(at.jsx)(k.a,{exact:!0,to:"/"})]})};c.a.render(Object(at.jsx)(s.a,{store:w,children:Object(at.jsx)(o.a,{children:Object(at.jsx)(vt,{})})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.c3572edf.chunk.js.map